# Railway Staging Environment
# Same structure as production.yaml but for staging

app: research-auditor
environment: staging

railway:
  service_name: research-auditor-staging
  
  container:
    registry: ghcr.io
    repository: "{{ github.repository_owner }}/research-auditor"
    # Aligned with flake.nix: FastAPI + Uvicorn
    start_command: "bash -c 'cd /app && uv sync --frozen && exec uv run --frozen uvicorn app.entrypoints.http:app --host 0.0.0.0 --port ${PORT:-8080}'"
    port: 8080
  
  resources:
    memory: 256  # Less resources for staging